<html>
  <head>
    <script src="https://unpkg.com/@simplewebauthn/browser"></script>
    <script type="module">
      const { platformAuthenticatorIsAvailable } = SimpleWebAuthnBrowser;

      (async () => {
        if (await platformAuthenticatorIsAvailable()) {
          // const publicKey = {
          //   challenge: new Uint8Array([
          //     117, 61, 252, 231, 191, 241, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
          //     0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
          //   ]),
          //   userVerification: "required",
          // };

          // let resp = await navigator.credentials.get({ publicKey });
          // console.log(resp);
          // console.log(JSON.stringify(resp));
          // return;

          let credential = await navigator.credentials.create({
            publicKey: {
              challenge: new Uint8Array([
                117, 61, 252, 231, 191, 241, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
              ]),
              authenticatorSelection: {
                authenticatorAttachment: "platform",
                requireResidentKey: true,
                residentKey: "required",
              },
              rp: {
                name: "Morpheus",
              },
              user: {
                id: new Uint8Array([79, 252, 83, 72, 214, 7, 89, 26]),
                name: "Neo",
                displayName: "neo@matrix.io",
              },
              pubKeyCredParams: [{ type: "public-key", alg: -7 }],
            },
          });
          console.log(credential);
          console.log(JSON.stringify(credential));
          /**
           * Prompt the user to use Touch ID/Windows Hello/etc... or security keys to register or
           * authenticate
           *
           * How to decide which name to show for the device's platform authenticator is an exercise
           * left up to the developer (your best bet is User Agent analysis)
           */
        } else {
          /**
           * Only prompt the user to use security keys to register or authenticate
           */
        }
      })();
    </script>
  </head>
  <body>
    <h1>WebAuthn</h1>
  </body>
</html>
